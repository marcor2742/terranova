<div class="page-container">
	<div class="p-fluid">
		<p-toolbar styleClass="custom-toolbar">
			<div class="p-toolbar-group-start">
				<div class="logo">Lollo&Marco's Cock shop</div>
			</div>

			<div class="p-toolbar-group-center">
				<div class="search-container">
					<app-searchbar
						(cocktailSelected)="modifySelectedCocktails($event)"
						(continuedSearch)="handleFullSearch($event)"
					></app-searchbar>
				</div>
			</div>

			<div class="p-toolbar-group-end">
				<p-button
					icon="{{
						themeService.isDarkTheme() ? 'pi pi-sun' : 'pi pi-moon'
					}}"
					styleClass="p-button-rounded p-button-text"
					(onClick)="toggleTheme()"
					aria-label="'Toggle theme'"
				></p-button>

				<p-button
					icon="pi pi-bars"
					styleClass="p-button-rounded p-button-text"
					(onClick)="toggleSidebar()"
					aria-label="'Toggle sidebar'"
				></p-button>
			</div>
		</p-toolbar>
	</div>

	<!-- Main Content Area with Sidebar -->
	<div class="main-container">
		<div class="sidebar" [class.collapsed]="!sidebarExpanded()">
			<div class="sidebar-header">
				<form [formGroup]="sidebarForm">
					<p-selectButton
					[options]="sidebarModeOptions"
					formControlName="sidebarMode"
					[style]="{ width: '100%' }"
					optionLabel="label"
					optionValue="value"
				  >
					<ng-template let-item pTemplate="item">
						<div class="sidebar-mode-option">
							<i [class]="item.icon"></i>
							<span>{{ item.label }}</span>
						</div>
					</ng-template>
				</p-selectButton>
				</form>
			</div>

			<!-- Show different content based on sidebar mode -->
			<div [ngSwitch]="sidebarMode()">
				<div *ngSwitchCase="'navigation'" class="sidebar-navigation">
					<nav class="sidebar-menu">
						<div
							class="menu-item"
							[class.active]="activeView() === 'dashboard'"
							(click)="setActiveView('dashboard')"
						>
							<i class="pi pi-chart-bar"></i>
							<span>{{ "Dashboard" | translate }}</span>
						</div>
						
					</nav>
				</div>

				<!-- Filters content -->
				<div *ngSwitchCase="'filters'" class="sidebar-filters">
					<app-filters
						[searchTerm]="currentSearchTerm()"
					></app-filters>
				</div>
			</div>
		</div>

		<!-- Main Content -->
		<main class="content">
			<!-- Home View -->
			<div class="content-inner" *ngIf="activeView() === 'home'">
				<h1>Welcome to Terranova</h1>
				<p>Your go-to destination for exploring cocktails!</p>

				<div class="theme-info">
					<p>Current theme colors:</p>
					<div class="color-samples">
						<div
							class="color-sample"
							style="background-color: var(--primary-color)"
						>
							Primary
						</div>
						<div
							class="color-sample"
							style="background-color: var(--secondary-color)"
						>
							Secondary
						</div>
						<div
							class="color-sample"
							style="background-color: var(--tertiary-color)"
						>
							Tertiary
						</div>
						<div
							class="color-sample"
							style="background-color: var(--quaternary-color)"
						>
							Quaternary
						</div>
					</div>
				</div>
			</div>

			<!-- Settings View -->
			<div class="content-inner" *ngIf="activeView() === 'settings'">
				<app-settings></app-settings>
			</div>

			<!-- Dashboard View (placeholder) -->
			<div class="content-inner" *ngIf="activeView() === 'dashboard'">
				<h1>Dashboard</h1>
				<p>Your dashboard content will appear here.</p>
			</div>

			<!-- Cocktails View (placeholder) -->
			<div class="content-inner" *ngIf="activeView() === 'cocktails'">
				<h1>Cocktails</h1>
				<p>Browse all cocktails here.</p>
			</div>

			<!-- Favorites View (placeholder) -->
			<div class="content-inner" *ngIf="activeView() === 'favorites'">
				<h1>Favorites</h1>
				<p>Your favorite cocktails will appear here.</p>
			</div>

			<!-- Replace the existing cocktail details section with this: -->
			<div class="cocktail-full" *ngIf="showCocktailDetails()">
				<div class="cocktail-header">
					<h2>Selected Cocktails</h2>
					<button
						class="close-button"
						(click)="closeCocktailDetails()"
					>
						<span class="material-icons">close</span>
					</button>
				</div>

				<p-scroller
					[items]="selectedCocktails()"
					[style]="{ width: '100%', height: '80vh' }"
					styleClass="cocktail-scroller"
					[delay]="250"
					[showLoader]="false"
					[lazy]="false"
					[autoSize]="true"
				>
					<ng-template pTemplate="item" let-id let-index="index">
						<div class="cocktail-item-container">
							<app-cocktail-card
								[cockId]="id"
								[showAll]="true"
								[IsRemovable]="true"
								(removeCocktail)="removeCocktail($event)"
							>
							</app-cocktail-card>

							<p-divider
								*ngIf="index < selectedCocktails().length - 1"
								styleClass="cocktail-divider"
							></p-divider>
						</div>
					</ng-template>
					<ng-template pTemplate="loader" let-options="options">
						<div class="flex justify-content-center">
							<p-skeleton
								height="320px"
								width="100%"
								styleClass="mb-2"
							></p-skeleton>
						</div>
					</ng-template>
				</p-scroller>
			</div>
		</main>
	</div>
</div>
